<% layout('layouts/boilerplate')%>
<div class="container">
<div id="carouselExampleFade" class="carousel slide carousel-fade"></div>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="..." class="d-block w-100" alt="...">
    </div>
    <div class="carousel-item">
      <img src="..." class="d-block w-100" alt="...">
    </div>
    <div class="carousel-item">
      <img src="..." class="d-block w-100" alt="...">
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>


<div class="container py-3">
  <!-- Card Start -->
  <div class="card">
    <div class="row">
      <div class="row">
        <!--carousel start-->
        <div class="col-md-5">
          <div
            id="carouselExampleAutoplaying"
            class="carousel slide"
            data-bs-ride="carousel"
          >
            <div class="carousel-inner">
              <% let isFirst2 = true; %> <%menu.images.forEach(image => { %>
              <div class="carousel-item <%= isFirst ? 'active' : '' %>">
                <img
                  src="<%= image.imageUrl %>"
                  class="d-block w-100"
                  alt="<%= image.imageName %>"
                  style="max-height: 300px"
                />
              </div>
              <% isFirst2 = false; %> <% }); %>
            </div>
            <button
              class="carousel-control-prev"
              type="button"
              data-bs-target="#carouselExampleAutoplaying"
              data-bs-slide="prev"
            >
              <span
                class="carousel-control-prev-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button
              class="carousel-control-next"
              type="button"
              data-bs-target="#carouselExampleAutoplaying"
              data-bs-slide="next"
            >
              <span
                class="carousel-control-next-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        </div>
        <!--carousel stop-->
        <div class="col-md-7 px-3">
          <div class="card-body">
            <h4 class="card-title"><%=menu.title%></h4>
            <p class="card-text"><%=menu.description%></p>
            <p class="card-text"><%=menu.description%></p>
            <br />
            <% if( currentUser && menu.author.equals(currentUser._id)) {%>
            <div
              class="btn-group"
              role="group"
              aria-label="Basic mixed styles example"
            >
              <a
                href="/menus/<%=menu.type.typeCode%>/<%=menu._id%>/edit"
                class="mt-auto btn btn-primary"
                >Edit Menu</a
              >
              <form
                action="/menus/<%=menu.type.typeCode%>/<%=menu._id%>?_method=DELETE"
                method="POST"
              >
                <button class="auto btn btn-danger">Delete Menu</button>
              </form>
            </div>
            <% } %>
          </div>
          <!--card stop-->
        </div>
      </div>
    </div>

    <script>
      const menu = { features: <%- JSON.stringify(menu) %>};
    </script>
  </div>
</div>


<script src="/javascripts/popper.js"></script>
<script src="/javascripts/jquery.min.js"></script>
<script src="/javascripts/owl.carousel.min.js"></script>
<script src="/javascripts/main.js"></script>