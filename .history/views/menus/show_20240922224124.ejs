<% layout('layouts/boilerplate')%>

<div class="container py-3">
  <!-- Card Start -->
  <div class="card">
    <div class="row">
      <div id="carouselExampleCrossfade" class="carousel slide carousel-fade" data-mdb-ride="carousel" data-mdb-carousel-init>
  <div class="carousel-indicators">
    <button
      type="button"
      data-mdb-target="#carouselExampleCrossfade"
      data-mdb-slide-to="0"
      class="active"
      aria-current="true"
      aria-label="Slide 1"
    ></button>
    <button
      type="button"
      data-mdb-target="#carouselExampleCrossfade"
      data-mdb-slide-to="1"
      aria-label="Slide 2"
    ></button>
    <button
      type="button"
      data-mdb-target="#carouselExampleCrossfade"
      data-mdb-slide-to="2"
      aria-label="Slide 3"
    ></button>
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="https://mdbcdn.b-cdn.net/img/new/slides/041.webp" class="d-block w-100" alt="Wild Landscape"/>
    </div>
    <div class="carousel-item">
      <img src="https://mdbcdn.b-cdn.net/img/new/slides/042.webp" class="d-block w-100" alt="Camera"/>
    </div>
    <div class="carousel-item">
      <img src="https://mdbcdn.b-cdn.net/img/new/slides/043.webp" class="d-block w-100" alt="Exotic Fruits"/>
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-mdb-target="#carouselExampleCrossfade" data-mdb-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-mdb-target="#carouselExampleCrossfade" data-mdb-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>
    </div>
    <div class="row">
      <!--carousel start-->
      <div class="col-md-5">
        <div
          id="carouselExampleAutoplaying"
          class="carousel slide"
          data-bs-ride="carousel"
        >
          <div class="carousel-inner">
            <% let isFirst = true; %> <%menu.images.forEach(image => { %>
            <div class="carousel-item <%= isFirst ? 'active' : '' %>">
              <img
                src="<%= image.imageUrl %>"
                class="d-block w-100"
                alt="<%= image.imageName %>"
                style="max-height: 300px"
              />
            </div>
            <% isFirst = false; %> <% }); %>
          </div>
          <button
            class="carousel-control-prev"
            type="button"
            data-bs-target="#carouselExampleAutoplaying"
            data-bs-slide="prev"
          >
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button
            class="carousel-control-next"
            type="button"
            data-bs-target="#carouselExampleAutoplaying"
            data-bs-slide="next"
          >
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </div>
      <!--carousel stop-->
      <div class="col-md-7 px-3">
        <div class="card-body">
          <h4 class="card-title"><%=menu.title%></h4>
          <p class="card-text"><%=menu.description%></p>
          <p class="card-text"><%=menu.description%></p>
          <br />
          <% if( currentUser && menu.author.equals(currentUser._id)) {%>
          <div
            class="btn-group"
            role="group"
            aria-label="Basic mixed styles example"
          >
            <a
              href="/menus/<%=menu.type.typeCode%>/<%=menu._id%>/edit"
              class="mt-auto btn btn-primary"
              >Edit Menu</a
            >
            <form
              action="/menus/<%=menu.type.typeCode%>/<%=menu._id%>?_method=DELETE"
              method="POST"
            >
              <button class="auto btn btn-danger">Delete Menu</button>
            </form>
          </div>
          <% } %>
        </div>
        <!--card stop-->
      </div>
    </div>
  </div>

  <script>
    const menu = { features: <%- JSON.stringify(menu) %>};
  </script>
</div>
